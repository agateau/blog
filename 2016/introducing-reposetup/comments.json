[{"id":"dsq-2618753461","author":"Jan Moren","deleted":false,"createdAt":"2016-04-11T23:13:25Z","message":"<p>Why not use the --shared option directly for the clone command? You can pretty much set up your repo using just clone; less work than using this script as far as I can see.</p>","replies":[{"id":"dsq-2619202284","author":"Aurélien Gâteau","deleted":false,"createdAt":"2016-04-12T05:55:32Z","message":"<p>As far as I understand it, `git clone --shared` is a faster way to create a *local* clone of a repository. That is very different from what reposetup does: it runs on the server which is going to host repositories. It creates blank repositories, configured to be served over HTTP or using `git daemon` and provides urls to push to created repositories.</p>","replies":[{"id":"dsq-2619257359","author":"Jan Moren","deleted":false,"createdAt":"2016-04-12T07:11:56Z","message":"<p>Sorry - I meant \"init\" command, not \"clone\" command. My mistake. With \"git init --bare --shared\" git sets up the bare repo with permission for collaboration, and the \"--shared\" option also takes the permissions you want to set if you want.</p>","replies":[{"id":"dsq-2619381963","author":"Thomas","deleted":false,"createdAt":"2016-04-12T09:42:30Z","message":"<p>I agree, you can use --shared.</p><p>Here are some commands I use:</p><p>git init --bare --shared=group &lt;repo.git&gt;<br># for cgit<br>vi &lt;repo.git&gt;/description<br># for http fetch<br>mv &lt;repo.git&gt;/hooks/post-update.sample &lt;repo.git&gt;/hooks/post-update<br># for cgit and git-daemon<br>ln -s /srv/&lt;repo.git&gt; /srv/git/&lt;category&gt;/&lt;public-repo&gt;</p><p>cd &lt;repo.git&gt;<br># to use right umask and keep &lt;repogroup&gt; thanks to g+s<br>git config core.sharedRepository group<br>chgrp -R &lt;repogroup&gt; .<br>chmod -R g+rw .<br>find . -type d -exec chmod g+sx '{}' ';'</p>","replies":[]},{"id":"dsq-2619403381","author":"Aurélien Gâteau","deleted":false,"createdAt":"2016-04-12T10:09:37Z","message":"<p>Oh right, I see. My idea was to have a model similar to GitHub, where by default only the owner has read-write access, others can clone and provide patches. reposetup is not a replacement for gitolite, but maybe it would be useful to have a way to define the value of the --shared option by default... need to think about it.</p>","replies":[]}]}]}]},{"id":"dsq-2619470054","author":"Thomas","deleted":false,"createdAt":"2016-04-12T11:23:00Z","message":"<p>For completeness, you need UNIX group management (one group per repo), and SSH key management.</p>","replies":[{"id":"dsq-2619502468","author":"Aurélien Gâteau","deleted":false,"createdAt":"2016-04-12T11:53:17Z","message":"<p>That's a bit out of scope I think, I would switch to Gitolite if I had to provide read/write access to a repository to multiple users.</p>","replies":[]}]}]