pub_date: 2009-11-06 21:00:00 +01:00
public: yes
tags: ["gwenview","pictures","importer"]
title: "Gwenview Importer"

<p>I have been quite quiet on Gwenview front lately, getting a job which does not involve two hours in a train everyday and becoming a father for the second time apparently does not help to find free time to hack (how surprising!)</p>
<p>Still I managed to get some work done on the start page and fixed a few bugs here and there. The main improvement though is the implementation of an importer for Gwenview, based on some <a href="http://agateau.com/2009/06/02/back-from-all-hands-uds-karmic/">previous experiment</a>.</p>
<p>Its aim is to require as little manipulation as possible to get your pictures and video imported from your camera. It integrates with Solid so starting the import is just a matter of plugging in your camera/inserting your memory card, and selecting "Download Photos with Gwenview" from the popup which opens. You are then presented with a thumbnail view like the following, where you can select the documents to import as well as the import destination (destination is remembered across imports and defaults to ~/Pictures or whatever xdg defines):</p>
<a href="20091105-1-thumbnails.png"><img src="thumb_20091105-1-thumbnails.png" title="20091105-1-thumbnails" height="216" width="300" alt="Thumbnails" class="aligncenter size-medium wp-image-279"/></a>
<p>Clicking "Import Selected" or "Import All" imports the documents to your destination folder. When it is done, the import asks you what to do with the documents on the device.</p>
<a href="20091105-2-imported.png"><img src="thumb_20091105-2-imported.png" title="20091105-2-imported" height="216" width="300" alt="Documents have been imported" class="aligncenter size-medium wp-image-280"/></a>
<p>Once you clicked either "Delete" or "Keep", you get this final page:</p>
<a href="20091105-3-what-next.png"><img src="thumb_20091105-3-what-next.png" title="20091105-3-what-next" height="216" width="300" alt="What's next?" class="aligncenter size-medium wp-image-281"/></a>
<p>Whenever possible, the importer tries to be smart. For example it automatically goes inside folders as long as they are alone in the hierarchy, so if your pictures are all in /DCIM/FOOBAR/, it will go into this folder directly instead of showing you a single DCIM folder, then a FOOBAR folder. On the other hand, it won't scan the whole device recursively, which could be quite painful if you just plugged a large external hard drive...</p>
<p>Another example is handling of already imported documents. Gwenview Importer will tell you if it skipped documents which have already been imported or if it renamed documents to avoid overwriting existing ones. For example if I select "Keep" in the "Delete or Keep" dialog and in a next import select the 3 imported documents as well as 2 new documents, I get this message (The wording can probably be improved, please send suggestions...):</p>
<a href="20091105-4-imported2.png"><img src="thumb_20091105-4-imported2.png" title="20091105-4-imported2" height="216" width="300" alt="Skipped some documents during import" class="aligncenter size-medium wp-image-282"/></a>
<p>Yet another point where the importer tries to be smart is on the name of the imported documents. Nothing is less useful than a series of pictures named PICT0001.JPG, PICT0002.JPG... so by default Gwenview Importer renames your pictures using the shooting date. This can be configured by clicking on the "Settings" button from the thumbnail page, which brings this configuration dialog:</p>
<a href="20091105-5-settings.png"><img src="thumb_20091105-5-settings.png" title="20091105-5-settings" height="216" width="300" alt="Settings" class="aligncenter size-medium wp-image-283"/></a>
<p>I spent quite some time working on this formating thing. I tried to make it easy to customize the rename format by:
<ul>
<li> providing a preview of the output,</li>
<li>using words instead of single letter variables (ie {date} instead of %d),</li>
<li>making the list of available variables with their description always visible,</li>
<li>making the variable names clickable, so that you can easily insert them</li>
</ul>
It's not as good as what <a href="http://www.layt.net/john/blog/odysseus/a_challenge">Mac OS X can do</a>, but I hope it is easy enough nevertheless. If I get the time to work a bit more on this (read: unlikely to happen :/), I think  highlighting the variables in the line edit would be nice.</p>
<p>That's all for now. Tell me what you think of this.</p>
